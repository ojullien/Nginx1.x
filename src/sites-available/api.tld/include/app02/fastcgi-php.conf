## -----------------------------------------------------
## NGINX 1.x
## Directives for fastcgi.
##
## @Context server
## @Module ngx_http_fastcgi_module
## -----------------------------------------------------

# NOTE: You may setup a named upstream for php. We don't need and don't use upstream in our template.

location ~ \.php$ {

    fastcgi_pass unix:/run/php/api.tld.sock;

    # fastcgi parameters
    include snippets/fastcgi-php.conf;

    # fastcgi settings
    fastcgi_buffers 8 16k;
    fastcgi_buffer_size 32k;
    fastcgi_keep_conn on;
    fastcgi_intercept_errors on;
    fastcgi_read_timeout 300;
}

#
# Use those locations instead if using a front controller
#
#location ~ ^/index\.php(/|$) {
#
#    fastcgi_pass unix:/run/php/api.tld.sock;
#
#    # fastcgi parameters
#    include snippets/fastcgi-php.conf;
#
#    # fastcgi settings
#    fastcgi_buffers 8 16k;
#    fastcgi_buffer_size 32k;
#    fastcgi_keep_conn on;
#    fastcgi_intercept_errors on;
#    fastcgi_read_timeout 300;
#}
#
# return 404 for all other php files not matching the front controller
# this prevents access to other php files you don't want to be accessible.
#
#location ~ \.php$ {
#    return 404;
#}
